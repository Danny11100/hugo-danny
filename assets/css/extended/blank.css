/* Custom UI system for a minimal, calm, notion-like blog */

:root {
    --theme: #f4f3f1;
    --entry: #faf9f7;
    --content: #2a2d30;
    --primary: #1f2225;
    --secondary: #6c7278;
    --tertiary: #d6dadf;
    --border: #d7d4cf;
    --accent: #647f75;
    --radius: 14px;
    --gap: 24px;
    --card-pad: clamp(24px, 2.6vw, 36px);
    --main-width: 1040px;
    --reading-width: 860px;
    --header-height: 70px;
    --toc-width: 248px;
    --toc-top-gap: 42px;
    --code-bg: #f0f1ef;
    --code-block-bg: #f0f1ef;
}

.dark {
    --theme: #181a1f;
    --entry: #1f2228;
    --content: #e5e7ea;
    --primary: #f2f4f6;
    --secondary: #a5adb6;
    --tertiary: #3a4048;
    --border: #323741;
    --accent: #8aa89f;
    --code-bg: #252931;
    --code-block-bg: #252931;
}

* {
    box-sizing: border-box;
}

html,
body,
#top,
.list,
.dark.list {
    background: var(--theme) !important;
    background-image: none !important;
}

body {
    margin: 0;
    color: var(--content);
    font-family:
        Inter,
        -apple-system,
        BlinkMacSystemFont,
        "SF Pro Text",
        "Helvetica Neue",
        Arial,
        "Source Han Serif SC",
        "Noto Serif SC",
        serif;
    font-size: 16px;
    line-height: 1.74;
    letter-spacing: 0;
    background-color: var(--theme);
    background-image:
        radial-gradient(rgba(31, 34, 37, 0.028) 0.55px, transparent 0.55px),
        linear-gradient(180deg, rgba(255, 255, 255, 0.52), rgba(255, 255, 255, 0.52));
    background-size: 3px 3px, auto;
}

a {
    color: inherit;
    transition: color 0.2s ease, border-color 0.2s ease;
}

a:hover {
    color: var(--primary);
}

.post-content pre,
.post-content code,
code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}

.header {
    position: sticky;
    top: 0;
    z-index: 50;
    background: color-mix(in srgb, var(--theme) 93%, transparent);
    backdrop-filter: saturate(120%) blur(8px);
    border-bottom: 1px solid color-mix(in srgb, var(--border) 86%, #ffffff 14%);
}

.nav {
    display: grid;
    grid-template-columns: auto minmax(0, 1fr) auto;
    align-items: center;
    column-gap: clamp(14px, 1.8vw, 24px);
    width: 100%;
    max-width: calc(var(--main-width) + var(--gap) * 2);
    margin: 0 auto;
    min-height: var(--header-height);
    padding: 0 var(--gap);
    line-height: 1.2;
}

.logo,
.logo a {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
}

.logo a span {
    font-size: clamp(1.64rem, 1.7vw, 1.88rem);
    font-weight: 680;
    letter-spacing: -0.01em;
    color: var(--primary);
}

.logo-switches {
    display: inline-flex;
    align-items: center;
    gap: 10px;
}

#theme-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--secondary);
    border: 0;
    background: transparent;
    padding: 0;
    cursor: pointer;
}

#theme-toggle svg {
    width: 21px;
    height: 21px;
    stroke-width: 1.9;
}

#theme-toggle:hover {
    color: var(--accent);
}

.lang-switch {
    list-style: none;
    margin: 0;
    padding: 0;
}

.lang-switch a {
    color: var(--secondary);
    font-size: 1.08rem;
    font-weight: 610;
    letter-spacing: 0.01em;
    text-decoration: none;
}

#menu {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    justify-self: end;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: clamp(22px, 2vw, 34px);
}

#menu li {
    margin: 0;
    padding: 0;
}

#menu a {
    font-size: 1.03rem;
    font-weight: 530;
    letter-spacing: 0.01em;
    color: var(--secondary);
    text-decoration: none;
    line-height: 1.26;
    border-radius: 8px;
    padding: 6px 8px;
    margin: -6px -8px;
    display: inline-flex;
    align-items: baseline;
}

#menu a span {
    display: inline-block;
    line-height: 1.26;
    padding-bottom: 0.02em;
}

#menu .active {
    color: var(--accent);
    border-bottom: 0;
    font-weight: 600;
}

#menu a:hover,
.logo a:hover {
    color: var(--primary);
    background: transparent;
}

.lang-switch a,
.breadcrumbs a,
.post-meta a,
.entry-header h2 a,
.archive-entry-title a,
.post-tags a,
.terms-tags a {
    border-radius: 8px;
    padding: 2px 6px;
    margin: -2px -6px;
}

.lang-switch a:hover,
.breadcrumbs a:hover,
.post-meta a:hover,
.entry-header h2 a:hover,
.archive-entry-title a:hover,
.post-tags a:hover,
.terms-tags a:hover {
    color: var(--primary);
    background: transparent;
}

.hamburger-menu {
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 5px;
    width: 48px;
    height: 48px;
    border-radius: 15px;
    border: 1px solid var(--border);
    background: color-mix(in srgb, var(--entry) 90%, transparent);
    cursor: pointer;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
}

.hamburger-menu::before,
.hamburger-menu::after {
    content: none;
}

.hamburger-menu span {
    display: block;
    width: 20px;
    height: 2px;
    border-radius: 2px;
    background: var(--secondary);
}

.hamburger-menu:hover span {
    background: var(--accent);
}

.hamburger-menu:focus {
    outline: none;
}

.hamburger-menu:focus-visible {
    outline: 2px solid color-mix(in srgb, var(--accent) 52%, #ffffff 48%);
    outline-offset: 2px;
}

.main {
    width: 100%;
    max-width: calc(var(--main-width) + var(--gap) * 2);
    margin: 0 auto;
    padding: clamp(22px, 2.8vw, 40px) var(--gap) 64px;
}

.home-info,
.first-entry,
.post-entry,
.archive-entry,
.paginav,
.pagination a,
.post-tags a,
.terms-tags a,
.share-buttons {
    background: var(--entry);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow:
        7px 7px 18px rgba(23, 26, 30, 0.055),
        -7px -7px 18px rgba(255, 255, 255, 0.66);
}

.first-entry,
.home-info {
    min-height: 292px;
    padding: var(--card-pad);
}

.home-info .entry-header,
.home-info .entry-content,
.home-info .entry-footer,
.first-entry .post-info {
    width: min(100%, var(--reading-width));
}

.home-info .entry-header h1,
.first-entry .entry-header h1 {
    margin: 0;
}

.first-entry .entry-header h1 {
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "PingFang SC", "Hiragino Sans GB", "Noto Sans SC", sans-serif;
    font-size: clamp(2.06rem, 4.2vw, 2.86rem);
    line-height: 1.2;
    letter-spacing: -0.014em;
}

.home-info .entry-content,
.post-description {
    margin-top: 14px;
    color: var(--secondary);
    font-size: 1.06rem;
    line-height: 1.8;
}

.home-info .button,
.entry-footer .button {
    background: transparent;
    border: 1px solid var(--accent);
    color: var(--primary);
    border-radius: 999px;
    padding: 7px 15px;
}

.home-info .button:hover,
.entry-footer .button:hover {
    background: transparent;
    color: var(--accent);
    border-color: var(--accent);
}

.post-entry {
    display: flex;
    align-items: flex-start;
    gap: 24px;
    padding: var(--card-pad);
    margin-bottom: 18px;
}

.post-entry:hover {
    border-color: color-mix(in srgb, var(--border) 70%, var(--accent) 30%);
    box-shadow:
        9px 9px 20px rgba(23, 26, 30, 0.062),
        -8px -8px 20px rgba(255, 255, 255, 0.7);
}

.post-info {
    width: 100%;
    min-width: 0;
}

.entry-header h2 {
    margin: 0 0 14px;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "PingFang SC", "Hiragino Sans GB", "Noto Sans SC", sans-serif;
    font-size: clamp(1.5rem, 2.35vw, 1.96rem);
    line-height: 1.28;
    letter-spacing: -0.01em;
    text-wrap: pretty;
    overflow-wrap: anywhere;
    word-break: normal;
}

.entry-content {
    margin: 0 0 14px;
    color: var(--secondary);
    font-size: 1.06rem;
    line-height: 1.7;
    max-height: calc(1.7em * 3);
    overflow: hidden;
    white-space: normal;
    word-break: break-word;
}

.entry-footer,
.post-meta,
.breadcrumbs,
.archive-meta,
.archive-count {
    color: var(--secondary);
    font-size: 0.95rem;
}

.post-meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    column-gap: 0.52rem;
    row-gap: 0.2rem;
    line-height: 1.45;
}

.post-meta .i18n_list {
    display: inline-flex;
    align-items: center;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 0.35rem;
}

.post-meta .i18n_list li {
    margin: 0;
    padding: 0;
}

.post-meta .meta-item {
    display: inline-flex;
    align-items: center;
    white-space: nowrap;
}

.breadcrumbs {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    column-gap: 6px;
    row-gap: 4px;
    line-height: 1.5;
}

.breadcrumbs a {
    display: inline-flex;
    align-items: center;
}

.archive-year {
    margin-top: 2.15rem;
}

.archive-year:first-of-type {
    margin-top: 0.9rem;
}

.archive-year-header {
    margin: 0 0 1.1rem;
    font-size: clamp(2.1rem, 4vw, 2.9rem);
    line-height: 1.1;
    letter-spacing: -0.013em;
}

.archive-month {
    margin: 1.35rem 0 2rem;
}

.archive-month-header {
    margin: 0 0 0.95rem;
    font-size: clamp(1.56rem, 2.4vw, 1.98rem);
    line-height: 1.2;
    letter-spacing: -0.008em;
    color: var(--primary);
}

.archive-posts {
    display: grid;
    gap: 14px;
}

.archive-entry {
    padding: 18px 20px;
}

.archive-entry-title {
    margin: 0 0 0.52rem;
    font-size: clamp(1.28rem, 1.9vw, 1.62rem);
    line-height: 1.34;
    letter-spacing: -0.007em;
}

.archive-meta {
    font-size: 0.99rem;
    line-height: 1.5;
}

.entry-cover {
    width: min(38%, 310px);
    min-width: 220px;
    aspect-ratio: 16 / 10;
    margin: 0;
    border-radius: 10px;
    overflow: hidden;
}

.entry-cover img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 10px;
}

.entry-cover1 {
    margin: 0 0 2rem;
    border-radius: 12px;
    overflow: hidden;
}

.entry-cover1 img {
    display: block;
    width: 100%;
    height: auto;
    border-radius: 12px;
}

.post-single {
    position: relative;
    width: 100%;
    max-width: var(--reading-width);
    margin: 0 auto;
}

.post-header {
    margin: 12px auto 10px;
}

.post-title {
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "PingFang SC", "Hiragino Sans GB", "Noto Sans SC", sans-serif;
    font-size: clamp(2.12rem, 3.45vw, 3rem);
    line-height: 1.18;
    letter-spacing: -0.015em;
    text-wrap: pretty;
    overflow-wrap: anywhere;
    word-break: normal;
}

html[lang="zh"] .post-title,
html[lang="zh"] .entry-header h2,
html[lang="zh"] .home-info .entry-header h1,
html[lang="zh"] .first-entry .entry-header h1 {
    word-break: keep-all;
}

.post-divider {
    border: 0;
    border-top: 1px solid var(--border);
    margin: 16px 0 24px;
}

.post-content {
    font-size: clamp(1.08rem, 1.2vw, 1.14rem);
    line-height: 1.82;
    color: var(--content);
}

.post-content p,
.post-content ul,
.post-content ol,
.post-content blockquote,
.post-content figure {
    margin: 0 0 1.48em;
}

.post-content h2,
.post-content h3,
.post-content h4,
.post-content h5,
.post-content h6 {
    scroll-margin-top: calc(var(--header-height) + 28px);
}

.post-content h2 {
    margin: 1.74em 0 0.62em;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "PingFang SC", "Hiragino Sans GB", "Noto Sans SC", sans-serif;
    font-size: clamp(1.68rem, 2.45vw, 2.08rem);
    line-height: 1.3;
}

.post-content h3 {
    margin: 1.46em 0 0.56em;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "PingFang SC", "Hiragino Sans GB", "Noto Sans SC", sans-serif;
    font-size: clamp(1.36rem, 2.05vw, 1.66rem);
    line-height: 1.34;
}

.post-content h4 {
    margin: 1.28em 0 0.55em;
    font-size: 1.16rem;
}

.post-content a {
    color: inherit;
    border-bottom: 1px solid var(--tertiary);
    text-decoration: none;
    box-shadow: none;
}

.post-content a:hover {
    color: var(--accent);
    border-bottom-color: var(--accent);
}

.post-content blockquote {
    border-inline-start: 3px solid var(--tertiary);
    background: color-mix(in srgb, var(--entry) 90%, transparent);
    padding: 0.28em 1em;
    border-radius: 0 8px 8px 0;
    color: var(--secondary);
}

.post-content pre,
.post-content .highlight:not(table),
.post-content code {
    border: 1px solid var(--border);
    border-radius: 8px;
    background: var(--code-bg);
    box-shadow: none;
}

.post-content img,
.post-content figure img,
.entry-cover img,
.entry-cover1 img {
    border-radius: 12px;
}

.post-content figure {
    max-width: 100%;
    overflow: hidden;
}

.post-content figure[style] {
    max-width: 100% !important;
    width: 100% !important;
}

.post-content img,
.post-content figure img {
    display: block;
    max-width: 100% !important;
    width: 100% !important;
    height: auto !important;
    object-fit: contain;
}

.post-content img[style] {
    max-width: 100% !important;
    width: 100% !important;
    height: auto !important;
}

.post-content img,
.post-content figure {
    margin: 2rem 0 2.2rem;
}

.post-tags a,
.terms-tags a,
.pagination a,
.paginav a,
.archive-entry {
    color: var(--secondary);
}

.post-tags a:hover,
.terms-tags a:hover,
.pagination a:hover,
.paginav a:hover {
    color: var(--accent);
    border-color: var(--accent);
    background: transparent;
}

.post-toc {
    display: block;
    margin: 0 0 1.6rem;
}

.toc {
    background: var(--entry);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 14px 16px;
    box-shadow:
        6px 6px 16px rgba(23, 26, 30, 0.05),
        -6px -6px 16px rgba(255, 255, 255, 0.62);
}

.toc details summary {
    margin: 0;
    padding: 4px 0 10px;
    cursor: pointer;
    color: var(--primary);
    font-size: 0.98rem;
}

.toc details[open] summary {
    font-weight: 600;
}

.toc .inner {
    margin: 0;
    max-height: 60vh;
    overflow-y: auto;
    font-size: 0.96rem;
    line-height: 1.56;
}

.toc ul {
    list-style: none;
    margin: 0;
    padding-left: 0;
}

.toc li {
    list-style: none;
    margin: 0.28rem 0;
    padding: 0;
}

.toc ul ul {
    margin-top: 0.35rem;
    margin-left: 0.85rem;
    padding-left: 0.75rem;
    border-left: 1px solid var(--border);
}

.toc a {
    color: var(--secondary);
    text-decoration: none;
    border: 0;
    box-shadow: none;
}

.toc a:hover,
.toc a:focus-visible {
    color: var(--accent);
    text-decoration: none;
}

.toc .active {
    color: var(--accent);
    font-weight: 600;
    text-decoration: none;
    border: 0;
}

@media (min-width: 768px) {
    .post-single.has-toc {
        padding-right: 0;
    }

    .post-single.has-toc .post-toc {
        display: block;
        position: static;
        width: 100%;
        max-height: none;
        margin: 0 0 1.8rem;
    }

    .post-single.has-toc .post-toc .toc {
        margin-top: 0;
    }

    .post-single.has-toc .post-toc .toc .inner {
        max-height: 52vh;
    }
}

@media (max-width: 767px) {
    .post-toc,
    .post-toc .toc {
        display: none !important;
    }
}

.top-link {
    background: var(--entry);
    border: 1px solid var(--border);
    box-shadow:
        5px 5px 12px rgba(23, 26, 30, 0.05),
        -5px -5px 12px rgba(255, 255, 255, 0.62);
}

/* WeChat imported content may include hard-coded dark text colors. */
body.dark .post-content [style*="color:"] {
    color: var(--content) !important;
}

body.dark .post-content [style*="color:"] * {
    color: inherit !important;
}

body.dark .post-content .normal_text_link,
body.dark .post-content .rich_pages,
body.dark .post-content [data-layout-id],
body.dark .post-content [data-pm-slice],
body.dark .post-content [leaf] {
    color: var(--content) !important;
}

body.dark .post-content a {
    color: var(--primary);
    border-bottom-color: var(--tertiary);
}

@media (max-width: 1024px) {
    .post-entry {
        gap: 16px;
    }

    .entry-cover {
        width: min(42%, 270px);
        min-width: 190px;
    }
}

@media (max-width: 900px) {
    .nav {
        grid-template-columns: minmax(0, 1fr) auto;
        align-items: center;
        row-gap: 12px;
        min-height: var(--header-height);
        padding: 10px 14px;
    }

    .logo {
        min-width: 0;
        grid-column: 1;
        grid-row: 1;
    }

    .logo a span {
        font-size: clamp(1.44rem, 6.5vw, 1.82rem);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 58vw;
    }

    .logo-switches {
        gap: 8px;
    }

    .lang-switch a,
    #menu a {
        font-size: 1.04rem;
    }

    #menu {
        display: none;
        grid-column: 1 / -1;
        grid-row: 2;
        width: 100%;
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
        padding: 12px 16px;
        border: 1px solid color-mix(in srgb, var(--border) 90%, #ffffff 10%);
        border-radius: 14px;
        background: var(--entry);
        box-shadow:
            5px 5px 14px rgba(23, 26, 30, 0.045),
            -5px -5px 14px rgba(255, 255, 255, 0.58);
    }

    #menu li,
    #menu li + li {
        margin-inline-start: 0 !important;
        width: 100%;
    }

    #menu a {
        display: block;
        width: 100%;
        padding: 5px 0;
        line-height: 1.36;
        text-align: left;
    }

    #menu.open {
        display: flex;
    }

    .hamburger-menu {
        display: inline-flex;
        grid-column: 2;
        grid-row: 1;
        justify-self: end;
        margin-left: 0;
        width: 48px;
        height: 48px;
    }

    .post-entry {
        flex-direction: column;
        gap: 14px;
        padding: 18px;
    }

    .entry-cover {
        width: 100%;
        min-width: 0;
    }

    .entry-header h2 {
        font-size: clamp(1.35rem, 6.4vw, 1.9rem);
    }

    .first-entry,
    .home-info {
        min-height: 238px;
        padding: 22px 20px;
    }

    .main {
        padding: 16px 16px 40px;
    }

    .post-content {
        font-size: 1.03rem;
        line-height: 1.8;
    }

    .post-header {
        margin: 8px auto 6px;
    }

    .post-title {
        font-size: clamp(1.94rem, 7.2vw, 2.3rem);
        line-height: 1.2;
    }

    .post-meta {
        font-size: 0.9rem;
        column-gap: 0.46rem;
        row-gap: 0.16rem;
    }

    .archive-year {
        margin-top: 1.7rem;
    }

    .archive-year-header {
        margin-bottom: 0.9rem;
        font-size: clamp(1.95rem, 9vw, 2.45rem);
    }

    .archive-month {
        margin: 0.9rem 0 1.45rem;
    }

    .archive-month-header {
        margin-bottom: 0.74rem;
        font-size: clamp(1.34rem, 6.7vw, 1.7rem);
    }

    .archive-posts {
        gap: 10px;
    }

    .archive-entry {
        padding: 14px 14px;
    }

    .archive-entry-title {
        margin-bottom: 0.46rem;
        font-size: clamp(1.18rem, 6.2vw, 1.48rem);
        line-height: 1.32;
    }

    .archive-meta {
        font-size: 0.95rem;
        line-height: 1.46;
    }
}

@media (max-width: 560px) {
    .nav {
        padding: 8px 12px;
    }

    .logo a span {
        max-width: 54vw;
    }

    .main {
        padding-inline: 14px;
    }

    .first-entry,
    .home-info {
        padding: 20px 18px;
    }

    .post-title {
        font-size: clamp(1.78rem, 7vw, 2.02rem);
        line-height: 1.2;
        letter-spacing: -0.006em;
    }

    .entry-content {
        font-size: 1rem;
    }

    .post-content {
        font-size: 1.02rem;
        line-height: 1.78;
    }

    .post-content p,
    .post-content ul,
    .post-content ol,
    .post-content blockquote,
    .post-content figure {
        margin-bottom: 1.12em;
    }
}

.dark body {
    background-image: none;
}

.dark .home-info,
.dark .first-entry,
.dark .post-entry,
.dark .archive-entry,
.dark .paginav,
.dark .pagination a,
.dark .post-tags a,
.dark .terms-tags a,
.dark .share-buttons,
.dark .toc,
.dark .top-link {
    box-shadow: none;
}
